<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />
  <link rel="stylesheet" href="stylesheets/book_view.css" />
</head>

<body>
  <!-- NAVBAR -->
  <header>
    <nav class="navbar navbar-dark bg-dark fixed-top">
      <div class="container-sm d-flex">
        <a class="navbar-brand" href="/">Bookshop</a>
        <form action="/" method="post">
          <div class="input-group align-self-stretch">
            <input class="form-control" type="search" name="searchbar" placeholder="search" value="<%=searchbar%>">
            <button class="btn btn-outline-secondary" type="submit">Search</button>
          </div>
        </form>
        <button class="btn btn-outline-secondary" id="loginBtn">
          Log in
          <!-- <i class="bi-alarm" style="font-size: 1rem; color: cornflowerblue;"></i> -->
        </button>
        <button class="btn btn-outline-secondary" id="cartBtn">
          Cart
          <!-- <i class="bi-alarm" style="font-size: 1rem; color: cornflowerblue;"></i> -->
        </button>
      </div>
    </nav>
  </header>
  <main class="container">
      <div class="row row-cols-1 row-cols-sm-2 mb-4 border">
        <!-- COVER -->
        <div class="col order-md-1 mb-1">
          <img class="img-fluid py-3"  src="<%=book.image_path%>">
        </div>
        <!-- MAIN DATA & ADD TO CART -->
        <div class="col order-md-2 my-3">
          <h4 class="text-dark">
            <%=book.title%>
          </h4>
          <h5 class="text-muted">
            Author: <%=book.author%>
          </h5>
          <h5 class="text-dark">
            <%=book.price%>$
          </h5>
          <button class="btn btn-dark" id="book-<%=book.id%>">Add to cart</button>
        </div>
      </div>
      <div class="row">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" id="description-tab" data-bs-toggle="tab" href="#description" role="tab"
              aria-selected="true" aria-controls="description">Description</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-selected="false"
              aria-controls="details">Details</a>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
            <%=book.description%>
          </div>
          <div class="tab-pane fade" id="details" role="tabpanel" aria-labelledby="details-tab">
            <dl class="row">
              <dt class="col-sm-2 text-muted">Title:</dt>
              <dd class="col-sm-10">
                <%=book.title%>
              </dd>

              <dt class="col-sm-2 text-muted">Author:</dt>
              <dd class="col-sm-10">
                <%=book.author%>
              </dd>

              <dt class="col-sm-2 text-muted">Genre:</dt>
              <dd class="col-sm-10">
                <%=book.genre%>
              </dd>

              <dt class="col-sm-2 text-muted">Publisher:</dt>
              <dd class="col-sm-10">
                <%=book.publisher%>
              </dd>

              <dt class="col-sm-2 text-muted">Publication year:</dt>
              <dd class="col-sm-10">
                <%=book.publication_year%>
              </dd>
            </dl>
          </div>
        </div>
      </div>
  </main>

  <script>
    var loginBtn = document.getElementById("loginBtn");
    loginBtn.addEventListener('click', function () {
      //console.log("LOG");
      window.location.href='/login?returnUrl=' + window.location.href;
    });
  </script>
  <script>
    var cartBtn = document.getElementById("cartBtn");
    if (cartBtn) {
      cartBtn.addEventListener('click', function () {
        //console.log("LOG");
        window.location.href = '/cart';
      });
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"></script>

</body>

</html>